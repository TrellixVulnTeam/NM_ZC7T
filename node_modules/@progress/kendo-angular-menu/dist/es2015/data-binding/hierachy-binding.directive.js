/**-----------------------------------------------------------------------------------------
* Copyright © 2021 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the project root for more information
*-------------------------------------------------------------------------------------------*/
import * as tslib_1 from "tslib";
import { Directive, Input } from '@angular/core';
import { MenuBase } from '../menu-base';
import { BindingDirectiveBase } from './binding-directive-base';
import { getter, last } from './utils';
const getField = (field, level) => Array.isArray(field) ? field[level] || last(field) : field;
const ɵ0 = getField;
/* tslint:disable:no-input-rename */
/**
 * A directive that converts the provided hierarchical data to [MenuItems]({% slug api_menu_menuitem %}) and binds them to the Menu.
 */
let HierarchyBindingDirective = class HierarchyBindingDirective extends BindingDirectiveBase {
    constructor(menu) {
        super(menu);
    }
    mapItems(items, level = 0) {
        return items.map((item) => {
            const menuItem = this.createItem(item, level);
            const children = this.getChildren(item, level);
            if (children) {
                menuItem.items = this.mapItems(children, level + 1);
            }
            return menuItem;
        });
    }
    createItem(item, level) {
        const result = { data: item };
        const fields = this.fields;
        for (let idx = 0; idx < fields.length; idx++) {
            const { target, source } = fields[idx];
            result[target] = getter(getField(source, level))(item);
        }
        return result;
    }
    getChildren(item, level) {
        if (this.childrenField) {
            const field = getField(this.childrenField, level);
            return item[field];
        }
    }
};
tslib_1.__decorate([
    Input("kendoMenuHierarchyBinding"),
    tslib_1.__metadata("design:type", Array)
], HierarchyBindingDirective.prototype, "data", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HierarchyBindingDirective.prototype, "textField", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HierarchyBindingDirective.prototype, "urlField", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HierarchyBindingDirective.prototype, "iconField", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HierarchyBindingDirective.prototype, "disabledField", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HierarchyBindingDirective.prototype, "cssClassField", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HierarchyBindingDirective.prototype, "cssStyleField", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HierarchyBindingDirective.prototype, "separatorField", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HierarchyBindingDirective.prototype, "childrenField", void 0);
HierarchyBindingDirective = tslib_1.__decorate([
    Directive({
        exportAs: 'kendoMenuHierarchyBinding',
        selector: '[kendoMenuHierarchyBinding]'
    }),
    tslib_1.__metadata("design:paramtypes", [MenuBase])
], HierarchyBindingDirective);
export { HierarchyBindingDirective };
export { ɵ0 };
