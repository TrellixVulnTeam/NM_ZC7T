import { Component, HostBinding } from '@angular/core';
import { MenuEventType } from '../../models/menu-events';
import { SfMenuService } from '../../sf-menu.service';
export class MenuProductsComponent {
    constructor(svc) {
        this.svc = svc;
        this.collapsed = false;
        this.productsExpanded = false;
    }
    get clr() {
        return this.border;
    }
    ngOnInit() {
        this.border = this.svc.colors.gray800;
        this.chevron = this.svc.colors.gray900;
        this.text = this.svc.colors.gray800;
        this.productsBg = this.svc.colors.gray100;
        this.configSubs$ = this.svc.menuConfig$.subscribe((cfg) => {
            this.menuConfig = cfg;
        });
        this.collapsedSubs$ = this.svc.menuCollapse$.subscribe((value) => {
            this.collapsed = value;
        });
    }
    ngOnDestroy() {
        this.configSubs$.unsubscribe();
        this.collapsedSubs$.unsubscribe();
    }
    currentProductClicked() {
        this.productsExpanded = !this.productsExpanded;
    }
    productClicked(item, ev) {
        this.svc.events$.next({
            type: MenuEventType.ProductClick,
            value: item
        });
        if (window.innerWidth <= this.svc.SMALL_RESOLUTION && !this.collapsed) {
            this.svc.menuCollapse$.next(!this.svc.menuCollapse$.value);
        }
        window.location.href = item.routeHref;
    }
}
MenuProductsComponent.decorators = [
    { type: Component, args: [{
                selector: 'sf-menu-products',
                template: "<div class=\"sf-menu-product\" *ngIf=\"menuConfig.currentProduct\" (click)=\"currentProductClicked()\" [class.collapsed]=\"collapsed\">\n  <em [ngClass]=\"menuConfig.currentProduct.iconClass\" *ngIf=\"menuConfig.currentProduct.iconClass\"></em>\n  <div\n    class=\"sf-menu-logo-bg\"\n    *ngIf=\"!menuConfig.currentProduct.iconClass && menuConfig.currentProduct.iconPath\"\n    [ngStyle]=\"{\n      'background-image': 'url(' + menuConfig.currentProduct.iconPath + ')'\n    }\"\n  ></div>\n  <em\n    class=\"fas fa-chevron-down\"\n    *ngIf=\"menuConfig.products && menuConfig.products.length > 0\"\n    [style.color]=\"chevron\"\n    [class.expanded]=\"productsExpanded\"\n    [class.collapsed]=\"collapsed\"\n    data-testid=\"menu-product-display-products-icon\"\n  ></em>\n</div>\n\n<div class=\"sf-customer-title\" *ngIf=\"!menuConfig.hideProductName && !collapsed\" [style.color]=\"text\">\n  <h4 *ngIf=\"menuConfig.currentProduct?.text\">\n    {{ menuConfig.currentProduct.text }}\n  </h4>\n</div>\n\n<div\n  class=\"sf-menu-products-list\"\n  [style.background-color]=\"productsBg\"\n  [class.expanded]=\"productsExpanded\"\n  *ngIf=\"menuConfig.products && menuConfig.products.length > 0\"\n>\n  <a\n    class=\"option\"\n    [class.collapsed]=\"collapsed\"\n    [class.two-columns]=\"menuConfig.products.length > 3\"\n    *ngFor=\"let option of menuConfig.products\"\n    (click)=\"productClicked(option, $event)\"\n    [attr.href]=\"option.routeHref\"\n    data-testid=\"menu-product-option-link\"\n  >\n    <em [ngClass]=\"option.iconClass\" *ngIf=\"option.iconClass\"></em>\n    <div\n      class=\"sf-menu-logo-bg\"\n      *ngIf=\"!option.iconClass && option.iconPath\"\n      [ngStyle]=\"{ 'background-image': 'url(' + option.iconPath + ')' }\"\n    ></div>\n  </a>\n</div>\n",
                styles: [":host{position:relative;width:calc(100% - 2px);height:auto;display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;padding:10px 0 0}.sf-menu-product{width:76px;height:76px;flex:0 0 76px;padding:5px;position:relative;cursor:pointer;margin-bottom:10px}.sf-menu-product em,.sf-menu-product i,.sf-menu-product img{-o-object-fit:contain;object-fit:contain;text-align:center;align-self:center;justify-self:center;height:auto;width:50%;width:100%;height:100%;background-size:cover}.sf-menu-product .sf-menu-logo-bg{height:100%;width:100%}.sf-menu-product .fa-chevron-down{position:absolute;width:auto;height:auto;top:calc(50% - 7px);right:-20px;transition:transform .15s ease-out;font-size:13px}.sf-menu-product .fa-chevron-down.expanded{transform:rotate(180deg)}.sf-menu-product .fa-chevron-down.collapsed{right:calc(50% - 5px);top:calc(100% - 2px);font-size:10px}.sf-menu-product.collapsed{flex:0 0 60px;margin:20px 0 10px;width:60px;height:60px}.sf-menu-products-list{height:auto;max-height:0;width:100%;overflow:hidden;display:flex;flex-wrap:wrap;justify-content:space-around;transition:max-height .24s ease-in-out;opacity:.7}.sf-menu-products-list.expanded{max-height:304px}.sf-menu-products-list .option{width:62px;height:62px;padding:5px;cursor:pointer}.sf-menu-products-list .option:hover .sf-menu-logo-bg{filter:brightness(1.2)}.sf-menu-products-list .option.collapsed{flex:0 0 50px;height:55.8px}.sf-menu-products-list .option.two-columns{width:80.6px}.sf-menu-products-list .option.two-columns:before{content:\" \";height:1px;width:86px;position:absolute;bottom:-1px;left:14px}.sf-menu-products-list .option em,.sf-menu-products-list .option i,.sf-menu-products-list .option img{-o-object-fit:contain;object-fit:contain;text-align:center;align-self:center;justify-self:center;height:auto;width:50%;width:100%;height:100%;transition:background-color .12s,transform}.sf-menu-products-list .option .sf-menu-logo-bg{width:100%;height:100%}.sf-menu-products-list .option:hover .logo-bg{background-color:#3a3b3e;transform:scale(1.15)}.sf-menu-products-list .option:after{content:\" \";background-color:#35353b;height:46px;width:1px;position:absolute;top:15px;right:-1px}.sf-customer-title{margin:10px 0}.sf-customer-title h4{margin:0;font-size:1em;opacity:.6;text-align:center}.sf-menu-logo-bg{background:50%/contain no-repeat}"]
            },] }
];
MenuProductsComponent.ctorParameters = () => [
    { type: SfMenuService }
];
MenuProductsComponent.propDecorators = {
    clr: [{ type: HostBinding, args: ['style.border-bottom-color',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1wcm9kdWN0cy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zZi1tZW51L3NyYy9saWIvY29tcG9uZW50cy9tZW51LXByb2R1Y3RzL21lbnUtcHJvZHVjdHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFxQixNQUFNLGVBQWUsQ0FBQztBQUcxRSxPQUFPLEVBQWEsYUFBYSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFFcEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBT3RELE1BQU0sT0FBTyxxQkFBcUI7SUFrQmhDLFlBQXFCLEdBQWtCO1FBQWxCLFFBQUcsR0FBSCxHQUFHLENBQWU7UUFkdkMsY0FBUyxHQUFHLEtBQUssQ0FBQztRQVlsQixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7SUFFaUIsQ0FBQztJQU4zQyxJQUE4QyxHQUFHO1FBQy9DLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBTUQsUUFBUTtRQUNOLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQzFDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7WUFDeEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUM7UUFDeEIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQy9CLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVELHFCQUFxQjtRQUNuQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7SUFDakQsQ0FBQztJQUVELGNBQWMsQ0FBQyxJQUFjLEVBQUUsRUFBYztRQUMzQyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7WUFDcEIsSUFBSSxFQUFFLGFBQWEsQ0FBQyxZQUFZO1lBQ2hDLEtBQUssRUFBRSxJQUFJO1NBQ0MsQ0FBQyxDQUFDO1FBQ2hCLElBQUksTUFBTSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNyRSxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUM1RDtRQUNELE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDeEMsQ0FBQzs7O1lBekRGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsa0JBQWtCO2dCQUM1Qiw0d0RBQTZDOzthQUU5Qzs7O1lBTlEsYUFBYTs7O2tCQW1CbkIsV0FBVyxTQUFDLDJCQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSG9zdEJpbmRpbmcsIE9uRGVzdHJveSwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IE1lbnVDb25maWcgfSBmcm9tICcuLi8uLi9tb2RlbHMvbWVudS1jb25maWcnO1xuaW1wb3J0IHsgTWVudUV2ZW50LCBNZW51RXZlbnRUeXBlIH0gZnJvbSAnLi4vLi4vbW9kZWxzL21lbnUtZXZlbnRzJztcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAnLi4vLi4vbW9kZWxzL21lbnUtaXRlbSc7XG5pbXBvcnQgeyBTZk1lbnVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2YtbWVudS5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnc2YtbWVudS1wcm9kdWN0cycsXG4gIHRlbXBsYXRlVXJsOiAnLi9tZW51LXByb2R1Y3RzLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbWVudS1wcm9kdWN0cy5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIE1lbnVQcm9kdWN0c0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgbWVudUNvbmZpZzogTWVudUNvbmZpZztcbiAgcHJpdmF0ZSBjb25maWdTdWJzJDogU3Vic2NyaXB0aW9uO1xuXG4gIGNvbGxhcHNlZCA9IGZhbHNlO1xuICBwcml2YXRlIGNvbGxhcHNlZFN1YnMkOiBTdWJzY3JpcHRpb247XG5cbiAgYm9yZGVyOiBzdHJpbmc7XG4gIGNoZXZyb246IHN0cmluZztcbiAgdGV4dDogc3RyaW5nO1xuICBwcm9kdWN0c0JnOiBzdHJpbmc7XG5cbiAgQEhvc3RCaW5kaW5nKCdzdHlsZS5ib3JkZXItYm90dG9tLWNvbG9yJykgZ2V0IGNscigpIHtcbiAgICByZXR1cm4gdGhpcy5ib3JkZXI7XG4gIH1cblxuICBwcm9kdWN0c0V4cGFuZGVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgc3ZjOiBTZk1lbnVTZXJ2aWNlKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuYm9yZGVyID0gdGhpcy5zdmMuY29sb3JzLmdyYXk4MDA7XG4gICAgdGhpcy5jaGV2cm9uID0gdGhpcy5zdmMuY29sb3JzLmdyYXk5MDA7XG4gICAgdGhpcy50ZXh0ID0gdGhpcy5zdmMuY29sb3JzLmdyYXk4MDA7XG4gICAgdGhpcy5wcm9kdWN0c0JnID0gdGhpcy5zdmMuY29sb3JzLmdyYXkxMDA7XG4gICAgdGhpcy5jb25maWdTdWJzJCA9IHRoaXMuc3ZjLm1lbnVDb25maWckLnN1YnNjcmliZSgoY2ZnKSA9PiB7XG4gICAgICB0aGlzLm1lbnVDb25maWcgPSBjZmc7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxhcHNlZFN1YnMkID0gdGhpcy5zdmMubWVudUNvbGxhcHNlJC5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLmNvbGxhcHNlZCA9IHZhbHVlO1xuICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5jb25maWdTdWJzJC51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMuY29sbGFwc2VkU3VicyQudW5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIGN1cnJlbnRQcm9kdWN0Q2xpY2tlZCgpIHtcbiAgICB0aGlzLnByb2R1Y3RzRXhwYW5kZWQgPSAhdGhpcy5wcm9kdWN0c0V4cGFuZGVkO1xuICB9XG5cbiAgcHJvZHVjdENsaWNrZWQoaXRlbTogTWVudUl0ZW0sIGV2OiBNb3VzZUV2ZW50KSB7XG4gICAgdGhpcy5zdmMuZXZlbnRzJC5uZXh0KHtcbiAgICAgIHR5cGU6IE1lbnVFdmVudFR5cGUuUHJvZHVjdENsaWNrLFxuICAgICAgdmFsdWU6IGl0ZW1cbiAgICB9IGFzIE1lbnVFdmVudCk7XG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IHRoaXMuc3ZjLlNNQUxMX1JFU09MVVRJT04gJiYgIXRoaXMuY29sbGFwc2VkKSB7XG4gICAgICB0aGlzLnN2Yy5tZW51Q29sbGFwc2UkLm5leHQoIXRoaXMuc3ZjLm1lbnVDb2xsYXBzZSQudmFsdWUpO1xuICAgIH1cbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGl0ZW0ucm91dGVIcmVmO1xuICB9XG59XG4iXX0=