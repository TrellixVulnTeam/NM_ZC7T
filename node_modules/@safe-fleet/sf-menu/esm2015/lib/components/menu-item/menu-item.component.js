import { Component, Input } from '@angular/core';
import { MenuEventType } from '../../models/menu-events';
import { MenuItem } from '../../models/menu-item';
import { SfMenuService } from '../../sf-menu.service';
export class MenuItemComponent {
    constructor(svc) {
        this.svc = svc;
        this.collapsed = false;
        this.level = 1;
    }
    ngOnInit() {
        this.text = this.svc.colors.gray900;
        this.configSubs$ = this.svc.menuConfig$.subscribe((cfg) => {
            this.menuConfig = cfg;
        });
        this.collapsedSubs$ = this.svc.menuCollapse$.subscribe((value) => {
            this.collapsed = value;
        });
    }
    ngOnDestroy() {
        this.configSubs$.unsubscribe();
        this.collapsedSubs$.unsubscribe();
    }
    click(evt) {
        switch (this.itemType) {
            case MenuEventType.ShortcutClick:
                this.shortcutClicked();
                break;
            case MenuEventType.UserActionClick:
                this.userOptionClicked();
                break;
            case MenuEventType.RouteClick:
                this.svc.routeClicked(this.item, evt);
                break;
            default:
                console.error('event not found');
        }
    }
    shortcutClicked() {
        this.svc.events$.next({
            type: MenuEventType.ShortcutClick,
            value: this.item
        });
        if (window.innerWidth <= this.svc.SMALL_RESOLUTION && !this.collapsed) {
            this.svc.menuCollapse$.next(!this.svc.menuCollapse$.value);
        }
    }
    userOptionClicked() {
        this.svc.events$.next({
            type: MenuEventType.UserActionClick,
            value: this.item
        });
        if (window.innerWidth <= this.svc.SMALL_RESOLUTION && !this.collapsed) {
            this.svc.menuCollapse$.next(!this.svc.menuCollapse$.value);
        }
    }
}
MenuItemComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line: component-selector
                selector: '[sf-menu-item]',
                template: "<div\n  class=\"li-container\"\n  [class.show-arrow]=\"item.items\"\n  [class.active-item]=\"item.active\"\n  [class.collapsed]=\"collapsed\"\n  [style.color]=\"text\"\n>\n  <div\n    [class.expanded-item]=\"item.expanded && item.items\"\n    class=\"main-div menu-item\"\n    [ngStyle]=\"{ 'border-left-color': menuConfig?.borderColor, 'padding-left': 10 * level + 'px' }\"\n    title=\"{{ menuConfig.tooltips || collapsed ? item.text : '' }}\"\n    (click)=\"click($event)\"\n  >\n    <div class=\"icon-container\" *ngIf=\"item.iconClass || item.iconPath\">\n      <div class=\"sf-icons-menu\" *ngIf=\"item.iconClass\" [class.collapsed]=\"collapsed\">\n        <em [ngClass]=\"item.iconClass\"></em>\n      </div>\n      <div\n        class=\"sf-menu-logo-bg\"\n        *ngIf=\"!item.iconClass && item.iconPath\"\n        [ngStyle]=\"{\n          'background-image': 'url(' + item.iconPath + ')'\n        }\"\n      ></div>\n    </div>\n    <span>{{ item.text }}</span>\n    <em class=\"fas fa-chevron-down\"></em>\n  </div>\n  <ul *ngIf=\"item.items\" class=\"item-children\">\n    <li\n      sf-menu-item\n      *ngFor=\"let child of item.items\"\n      [class.show-arrow]=\"child.items\"\n      [class.active-item]=\"child.active\"\n      [item]=\"child\"\n      [level]=\"level + 1\"\n      [itemType]=\"itemType\"\n    ></li>\n  </ul>\n</div>\n",
                styles: [":host .li-container{display:inline-block;width:100%;padding:0;overflow:hidden;cursor:pointer}:host .li-container .icon-container{width:24px}:host .li-container>div.main-div{margin-left:2px}:host .li-container>.menu-item{display:flex;align-items:center;justify-content:flex-start;padding:7px 10px;position:relative;min-height:38px}:host .li-container>.menu-item .sf-menu-logo-bg{width:1.6em;height:1.55em}:host .li-container>.menu-item span{width:calc(100% - 24px);min-width:100px;padding:0 10px;font-size:14px;line-height:18px;opacity:.71;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host .li-container>.menu-item:hover{position:relative}:host .li-container>.menu-item:hover:before{content:\" \";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fff;opacity:.1}:host .li-container>.menu-item:hover span{opacity:1}:host .li-container>.menu-item .fa-chevron-down{display:none;position:absolute;right:15px;top:16px;width:auto;height:auto;font-size:12px}:host .li-container.show-arrow>div .fa-chevron-down{display:inline-block;transform:rotate(0deg)}:host .li-container.show-arrow>div.expanded-item span{opacity:1}:host .li-container.show-arrow>div.expanded-item em.fa-chevron-down,:host .li-container.show-arrow>div.expanded-item i.fa-chevron-down{transform:rotate(180deg)}:host .li-container.show-arrow>div:hover{position:relative}:host .li-container.show-arrow>div:hover:before{content:\" \";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fff;opacity:.1}:host .li-container.show-arrow>div:hover span{opacity:1}:host .li-container.active-item>div.main-div{border-left:3px solid;margin-left:0}:host .li-container.active-item>div.main-div:before{content:\" \";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#fff;opacity:.2}:host .li-container.active-item>div.main-div span{opacity:1}:host .li-container.collapsed div{justify-content:center}:host .li-container.collapsed em,:host .li-container.collapsed i{width:auto}:host .li-container.collapsed .item-children,:host .li-container.collapsed span{display:none}:host .sf-icons-menu{text-align:center}:host .sf-icons-menu em,:host .sf-icons-menu i{font-size:16px}:host ul{list-style:none;padding-left:0;width:100%}.expanded-item+.item-children{display:block}ul.item-children{display:none}.sf-icons-menu.collapsed em{font-size:var(--fs-300)}.sf-menu-logo-bg{background:50%/contain no-repeat}"]
            },] }
];
MenuItemComponent.ctorParameters = () => [
    { type: SfMenuService }
];
MenuItemComponent.propDecorators = {
    item: [{ type: Input }],
    level: [{ type: Input }],
    itemType: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3NmLW1lbnUvc3JjL2xpYi9jb21wb25lbnRzL21lbnUtaXRlbS9tZW51LWl0ZW0uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFrQyxNQUFNLGVBQWUsQ0FBQztBQUdqRixPQUFPLEVBQWEsYUFBYSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDcEUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ2xELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQVF0RCxNQUFNLE9BQU8saUJBQWlCO0lBbUI1QixZQUFxQixHQUFrQjtRQUFsQixRQUFHLEdBQUgsR0FBRyxDQUFlO1FBVHZDLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFLVCxVQUFLLEdBQUcsQ0FBQyxDQUFDO0lBSXVCLENBQUM7SUFFM0MsUUFBUTtRQUNOLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7WUFDeEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUM7UUFDeEIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQy9CLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVELEtBQUssQ0FBQyxHQUFlO1FBQ25CLFFBQVEsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNyQixLQUFLLGFBQWEsQ0FBQyxhQUFhO2dCQUM5QixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7Z0JBQ3ZCLE1BQU07WUFDUixLQUFLLGFBQWEsQ0FBQyxlQUFlO2dCQUNoQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztnQkFDekIsTUFBTTtZQUNSLEtBQUssYUFBYSxDQUFDLFVBQVU7Z0JBQzNCLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7Z0JBQ3RDLE1BQU07WUFDUjtnQkFDRSxPQUFPLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FDcEM7SUFDSCxDQUFDO0lBRUQsZUFBZTtRQUNiLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztZQUNwQixJQUFJLEVBQUUsYUFBYSxDQUFDLGFBQWE7WUFDakMsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJO1NBQ0osQ0FBQyxDQUFDO1FBQ2hCLElBQUksTUFBTSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNyRSxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUM1RDtJQUNILENBQUM7SUFFRCxpQkFBaUI7UUFDZixJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7WUFDcEIsSUFBSSxFQUFFLGFBQWEsQ0FBQyxlQUFlO1lBQ25DLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSTtTQUNKLENBQUMsQ0FBQztRQUNoQixJQUFJLE1BQU0sQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDckUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDNUQ7SUFDSCxDQUFDOzs7WUE3RUYsU0FBUyxTQUFDO2dCQUNULCtDQUErQztnQkFDL0MsUUFBUSxFQUFFLGdCQUFnQjtnQkFDMUIsbTFDQUF5Qzs7YUFFMUM7OztZQVBRLGFBQWE7OzttQkFxQm5CLEtBQUs7b0JBRUwsS0FBSzt1QkFFTCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25EZXN0cm95LCBPbkluaXQsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IE1lbnVDb25maWcgfSBmcm9tICcuLi8uLi9tb2RlbHMvbWVudS1jb25maWcnO1xuaW1wb3J0IHsgTWVudUV2ZW50LCBNZW51RXZlbnRUeXBlIH0gZnJvbSAnLi4vLi4vbW9kZWxzL21lbnUtZXZlbnRzJztcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAnLi4vLi4vbW9kZWxzL21lbnUtaXRlbSc7XG5pbXBvcnQgeyBTZk1lbnVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2YtbWVudS5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogY29tcG9uZW50LXNlbGVjdG9yXG4gIHNlbGVjdG9yOiAnW3NmLW1lbnUtaXRlbV0nLFxuICB0ZW1wbGF0ZVVybDogJy4vbWVudS1pdGVtLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbWVudS1pdGVtLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTWVudUl0ZW1Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIG1lbnVDb25maWc6IE1lbnVDb25maWc7XG4gIHByaXZhdGUgY29uZmlnU3VicyQ6IFN1YnNjcmlwdGlvbjtcblxuICB0ZXh0OiBzdHJpbmc7XG4gIGljb246IHN0cmluZztcbiAgaWNvbkhpZ2g6IHN0cmluZztcbiAgYmc6IHN0cmluZztcbiAgYmdIaWdoOiBzdHJpbmc7XG5cbiAgY29sbGFwc2VkID0gZmFsc2U7XG4gIHByaXZhdGUgY29sbGFwc2VkU3VicyQ6IFN1YnNjcmlwdGlvbjtcblxuICBASW5wdXQoKSBpdGVtOiBNZW51SXRlbTtcblxuICBASW5wdXQoKSBsZXZlbCA9IDE7XG5cbiAgQElucHV0KCkgaXRlbVR5cGU6IE1lbnVFdmVudFR5cGU7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgc3ZjOiBTZk1lbnVTZXJ2aWNlKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMudGV4dCA9IHRoaXMuc3ZjLmNvbG9ycy5ncmF5OTAwO1xuICAgIHRoaXMuY29uZmlnU3VicyQgPSB0aGlzLnN2Yy5tZW51Q29uZmlnJC5zdWJzY3JpYmUoKGNmZykgPT4ge1xuICAgICAgdGhpcy5tZW51Q29uZmlnID0gY2ZnO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb2xsYXBzZWRTdWJzJCA9IHRoaXMuc3ZjLm1lbnVDb2xsYXBzZSQuc3Vic2NyaWJlKCh2YWx1ZSkgPT4ge1xuICAgICAgdGhpcy5jb2xsYXBzZWQgPSB2YWx1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuY29uZmlnU3VicyQudW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLmNvbGxhcHNlZFN1YnMkLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBjbGljayhldnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBzd2l0Y2ggKHRoaXMuaXRlbVR5cGUpIHtcbiAgICAgIGNhc2UgTWVudUV2ZW50VHlwZS5TaG9ydGN1dENsaWNrOlxuICAgICAgICB0aGlzLnNob3J0Y3V0Q2xpY2tlZCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTWVudUV2ZW50VHlwZS5Vc2VyQWN0aW9uQ2xpY2s6XG4gICAgICAgIHRoaXMudXNlck9wdGlvbkNsaWNrZWQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE1lbnVFdmVudFR5cGUuUm91dGVDbGljazpcbiAgICAgICAgdGhpcy5zdmMucm91dGVDbGlja2VkKHRoaXMuaXRlbSwgZXZ0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zb2xlLmVycm9yKCdldmVudCBub3QgZm91bmQnKTtcbiAgICB9XG4gIH1cblxuICBzaG9ydGN1dENsaWNrZWQoKSB7XG4gICAgdGhpcy5zdmMuZXZlbnRzJC5uZXh0KHtcbiAgICAgIHR5cGU6IE1lbnVFdmVudFR5cGUuU2hvcnRjdXRDbGljayxcbiAgICAgIHZhbHVlOiB0aGlzLml0ZW1cbiAgICB9IGFzIE1lbnVFdmVudCk7XG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IHRoaXMuc3ZjLlNNQUxMX1JFU09MVVRJT04gJiYgIXRoaXMuY29sbGFwc2VkKSB7XG4gICAgICB0aGlzLnN2Yy5tZW51Q29sbGFwc2UkLm5leHQoIXRoaXMuc3ZjLm1lbnVDb2xsYXBzZSQudmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHVzZXJPcHRpb25DbGlja2VkKCkge1xuICAgIHRoaXMuc3ZjLmV2ZW50cyQubmV4dCh7XG4gICAgICB0eXBlOiBNZW51RXZlbnRUeXBlLlVzZXJBY3Rpb25DbGljayxcbiAgICAgIHZhbHVlOiB0aGlzLml0ZW1cbiAgICB9IGFzIE1lbnVFdmVudCk7XG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IHRoaXMuc3ZjLlNNQUxMX1JFU09MVVRJT04gJiYgIXRoaXMuY29sbGFwc2VkKSB7XG4gICAgICB0aGlzLnN2Yy5tZW51Q29sbGFwc2UkLm5leHQoIXRoaXMuc3ZjLm1lbnVDb2xsYXBzZSQudmFsdWUpO1xuICAgIH1cbiAgfVxufVxuIl19